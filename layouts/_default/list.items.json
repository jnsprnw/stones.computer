{{ $itemsScratch := newScratch }}
{{- $aspects := (.Site.GetPage "/aspects").Resources -}}
{{- $topics := (.Site.GetPage "/topics").Resources -}}
{{- $itemsScratch.Add "list" slice -}}
{{- range $index, $element := sort ((.Site.GetPage "/sources").Resources | append (.Site.GetPage "/projects").Resources) "Title" -}}
	{{- $aspect := index (where $aspects "File.BaseFileName" "eq" $element.Params.aspect) 0 -}}
	{{- $topic := index (where $topics "File.BaseFileName" "eq" $element.Params.topic) 0 -}}
  {{- $itemsScratch.Add "list" (dict "id" $index "title" $element.Title "authors" (delimit $element.Params.authors ", " " and ") "aspect" $aspect.Title "aspectID" $element.Params.aspect "topic" $topic.Title "medium" $element.Params.medium "year" $element.Params.year "tags" $element.Params.tags "link" $element.Params.link) -}}
{{- end -}}
{{- $itemsScratch.Get "list" | jsonify -}}