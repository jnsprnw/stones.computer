@import "./global";

:root {
	--spacing: calc(var(--margin) * 0.5);
  --spacing-1: calc(var(--margin) * 1);
  --spacing-2: calc(var(--margin) * 2);
  --spacing-3: calc(var(--margin) * 3);
  --spacing-4: calc(var(--margin) * 4);
  --border-area: 1px solid rgba(0, 0, 0, 1);
  --border-link: 1px solid rgba(0, 0, 0, 0.8);
}

.wrapper {
	margin-left: auto;
	margin-right: auto;
	padding-left: var(--spacing-2);
	padding-right: var(--spacing-2);
	max-width: 1600px;
}

.homepage-header {
	padding-top: var(--spacing-2);
	padding-bottom: var(--spacing-2);

	& > * {
		display: block;
	}

	.logo, .subtitle {
		padding-bottom: var(--spacing-1);
	}
}

.homepage-intro {
	padding-bottom: var(--spacing-3);
}

.homepage-topics, .homepage-aspects {
	.section-headline {
		padding: var(--spacing-1) var(--spacing-2);
		background-color: var(--color-fg);
	}

	.header {
		display: grid;
		grid-template-columns: repeat(1, 1fr);
		grid-row-gap: var(--spacing-2);
		grid-column-gap: var(--spacing-1);
		padding: var(--spacing-2);
		padding-bottom: var(--spacing-4);

		@include query($medium) {
			grid-template-columns: repeat(2, 1fr);
		}

		.section-intro-headline {
			display: inline-block;
			border-bottom: var(--border-area);
			padding: 0 0 var(--spacing) var(--spacing-1);
			margin-bottom: var(--spacing);
			margin-left: calc(var(--spacing-1) * -1);
		}
	}
}

.homepage-topics {
	.topic-title {
	  position: relative; // Used to position in front of number
	}

	.questions {
		display: flex;
		align-items: center;
		justify-content: center;

		ul {
			padding: calc(var(--spacing-3) / 3);

			li {
				border-bottom: var(--border-area);
				padding: calc(var(--spacing-3) / 3) calc(var(--spacing-3) / 2);
				text-align: center;
				display: flex;
		  	justify-content: space-between;

		  	i {
		  		margin-left: calc(var(--spacing-3) / 3);
		  	}

				&:first-child {
					border-top: var(--border-area);
				}
			}
		}
	}

	.topics-list {
		.topic {
			display: grid;
			grid-template-columns: repeat(1, 1fr);
			grid-column-gap: var(--spacing-3);
			padding-bottom: var(--spacing-4);

			@include query($medium) {
				grid-template-columns: repeat(2, 1fr);
				padding: var(--spacing-3);
			}

			&:last-child {
				border-bottom: 0;
			}

			.topic-header {
				position: relative;
				padding-bottom: var(--spacing-2);

				.topic-title {
					z-index: $z-index-header-foreground;
					margin-top: var(--spacing-1);
				}

				.number {
					position: absolute;
					top: var(--spacing-1);
					z-index: $z-index-header-background;
					left: calc(var(--spacing-3) / 2 * 1);
				}

				@include query($medium) {
					border-top: var(--border-area);
					border-left: var(--border-area);

					.float {
						position: absolute;
						left: calc(var(--spacing-3) * -1/2 + var(--size-5));
						top: 0;
						writing-mode: vertical-lr;
						transform: rotate(-180deg);
					}
				}
			}

			.description {
				margin-top: var(--spacing-3);

				.topic-description-intro {
					display: inline-block;
					margin-bottom: var(--spacing-1);
				}
			}

			.aspects {
				margin-top: var(--spacing-3);

				@include query($medium) {
					margin-top: var(--spacing-1);
				}
			}
		}
	}
}

.homepage-aspects {
	.aspect {
		display: grid;
		grid-template-columns: repeat(1, 1fr);
		position: relative;
		grid-column-gap: var(--spacing-3); // TODO: Change to correct;
		align-items: start;
		margin-top: var(--spacing-2); // TODO: Bigger screens undo;

		@include query($medium) {
			margin-top: 0; // TODO: Bigger screens undo;
		}

		border-top: var(--border-area);

		&:last-child {
			border-bottom: var(--border-area);
		}

		@include query($medium) {
			grid-template-columns: repeat(2, 1fr);
			padding: var(--spacing-1) var(--spacing-3) var(--spacing-3);

			&:nth-child(odd) {
				border-right: var(--border-area);
			}

			&:nth-child(even) {
				border-left: var(--border-area);
			}

			h3 {
				grid-column-end: span 2;
				max-width: calc(50% - var(--spacing-3) / 2);
			}
		}

		.aspect-title {
			margin-bottom: var(--spacing-2);
			margin-top: var(--spacing-2);

			@include query($medium) {
				margin-bottom: var(--spacing); // TODO: Change to variable
				margin-top: var(--spacing);
			}
		}

		.caption {
			display: inherit; // TODO: What is this for?
		}

		.float {
			position: absolute;
			left: 0;
			top: calc(var(--size-5) * -1.8);

			@include query($medium) {
				left: var(--spacing-3);
			}
		}

		.hashtags {
			margin-top: var(--spacing-1);

			.tag {
				display: inline-block;
			}
		}
	}
}

.list {
	margin-bottom: var(--spacing-4); // TODO: Bigger screens undo;
	margin-top: var(--spacing-2); // TODO: Bigger screens undo;

	@include query($medium) {
		margin-bottom: 0; // TODO: Bigger screens undo;
		margin-top: var(--spacing); // TODO: Bigger screens undo;
	}

	.link {
	  border-bottom: var(--border-link);
	  transition: background-color $transition; // Used for highlighting

	  &.isHover { // Triggered by highlighting footnotes
		  background-color: var(--color-highlight);
		}

	  a {
	  	display: flex;
	  	justify-content: space-between;
	  	padding: var(--spacing);
	  }

	  &:first-child {
	  	border-top: var(--border-link);
	  }
	}

  &.list-complex {
  	a {
  		display: grid;
  		grid-template-columns: var(--spacing-2) 1fr var(--spacing);

  		.reference-description {
  			grid-column: 2 / span 1;
  		}

  		i {
  			grid-row-start: 1;
				grid-column-start: 3;
				justify-self: end;
  		}
  	}
  }

  @media (hover: none) {
  	.link:target {
		  animation: 15s ease 0s 1 fade-target;
		}
  }
}

.homepage-projects {
	li a {
		display: grid;
		grid-template-columns: 2fr 2fr 1fr 1fr 1rem;
		padding-bottom: var(--spacing);
		padding-top: var(--spacing);

		.title {
			grid-column-end: span 5;
		}

		.authors {
			grid-column-end: span 2;
		}

		@include query($medium) {
			.title {
				grid-column-end: span 1;
			}

			.authors {
				grid-column-end: span 1;
			}
		}
	}

	input {
    border: var(--border-link);
    padding: var(--spacing) var(--spacing-1);
    margin-bottom: var(--spacing-2);
  }
}

.page-footer {
	margin: var(--spacing-2) 0;
}

.table-link {
	position: fixed;
	z-index: $z-index-table-link;
	bottom: 0;
	right: 0;

	a {
		text-decoration: none;
		font-size: var(--size-3);
		padding: var(--spacing) var(--spacing-1);
		display: block;
		background-color: var(--color-accent);
		color: var(--color-bg);
		transition: background-color $transition;

		&:hover, &:focus {
			background-color: #000;
		}
	}
}
